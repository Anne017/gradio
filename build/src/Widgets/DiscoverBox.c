/* DiscoverBox.c generated by valac 0.30.1, the Vala compiler
 * generated from DiscoverBox.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <gio/gio.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>
#include <stdio.h>


#define GRADIO_TYPE_DISCOVER_BOX (gradio_discover_box_get_type ())
#define GRADIO_DISCOVER_BOX(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GRADIO_TYPE_DISCOVER_BOX, GradioDiscoverBox))
#define GRADIO_DISCOVER_BOX_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GRADIO_TYPE_DISCOVER_BOX, GradioDiscoverBoxClass))
#define GRADIO_IS_DISCOVER_BOX(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GRADIO_TYPE_DISCOVER_BOX))
#define GRADIO_IS_DISCOVER_BOX_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GRADIO_TYPE_DISCOVER_BOX))
#define GRADIO_DISCOVER_BOX_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GRADIO_TYPE_DISCOVER_BOX, GradioDiscoverBoxClass))

typedef struct _GradioDiscoverBox GradioDiscoverBox;
typedef struct _GradioDiscoverBoxClass GradioDiscoverBoxClass;
typedef struct _GradioDiscoverBoxPrivate GradioDiscoverBoxPrivate;

#define GRADIO_TYPE_RADIO_STATIONS_PROVIDER (gradio_radio_stations_provider_get_type ())
#define GRADIO_RADIO_STATIONS_PROVIDER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GRADIO_TYPE_RADIO_STATIONS_PROVIDER, GradioRadioStationsProvider))
#define GRADIO_RADIO_STATIONS_PROVIDER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GRADIO_TYPE_RADIO_STATIONS_PROVIDER, GradioRadioStationsProviderClass))
#define GRADIO_IS_RADIO_STATIONS_PROVIDER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GRADIO_TYPE_RADIO_STATIONS_PROVIDER))
#define GRADIO_IS_RADIO_STATIONS_PROVIDER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GRADIO_TYPE_RADIO_STATIONS_PROVIDER))
#define GRADIO_RADIO_STATIONS_PROVIDER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GRADIO_TYPE_RADIO_STATIONS_PROVIDER, GradioRadioStationsProviderClass))

typedef struct _GradioRadioStationsProvider GradioRadioStationsProvider;
typedef struct _GradioRadioStationsProviderClass GradioRadioStationsProviderClass;

#define GRADIO_TYPE_GRADIO_APP (gradio_gradio_app_get_type ())
#define GRADIO_GRADIO_APP(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GRADIO_TYPE_GRADIO_APP, GradioGradioApp))
#define GRADIO_GRADIO_APP_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GRADIO_TYPE_GRADIO_APP, GradioGradioAppClass))
#define GRADIO_IS_GRADIO_APP(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GRADIO_TYPE_GRADIO_APP))
#define GRADIO_IS_GRADIO_APP_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GRADIO_TYPE_GRADIO_APP))
#define GRADIO_GRADIO_APP_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GRADIO_TYPE_GRADIO_APP, GradioGradioAppClass))

typedef struct _GradioGradioApp GradioGradioApp;
typedef struct _GradioGradioAppClass GradioGradioAppClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _gradio_radio_stations_provider_unref0(var) ((var == NULL) ? NULL : (var = (gradio_radio_stations_provider_unref (var), NULL)))

#define GRADIO_TYPE_SEARCH (gradio_search_get_type ())

#define TYPE_RADIO_STATION (radio_station_get_type ())
#define RADIO_STATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_RADIO_STATION, RadioStation))
#define RADIO_STATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_RADIO_STATION, RadioStationClass))
#define IS_RADIO_STATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_RADIO_STATION))
#define IS_RADIO_STATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_RADIO_STATION))
#define RADIO_STATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_RADIO_STATION, RadioStationClass))

typedef struct _RadioStation RadioStation;
typedef struct _RadioStationClass RadioStationClass;
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

#define GRADIO_TYPE_LIST_ITEM (gradio_list_item_get_type ())
#define GRADIO_LIST_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GRADIO_TYPE_LIST_ITEM, GradioListItem))
#define GRADIO_LIST_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GRADIO_TYPE_LIST_ITEM, GradioListItemClass))
#define GRADIO_IS_LIST_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GRADIO_TYPE_LIST_ITEM))
#define GRADIO_IS_LIST_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GRADIO_TYPE_LIST_ITEM))
#define GRADIO_LIST_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GRADIO_TYPE_LIST_ITEM, GradioListItemClass))

typedef struct _GradioListItem GradioListItem;
typedef struct _GradioListItemClass GradioListItemClass;
#define _radio_station_unref0(var) ((var == NULL) ? NULL : (var = (radio_station_unref (var), NULL)))

struct _GradioDiscoverBox {
	GtkBox parent_instance;
	GradioDiscoverBoxPrivate * priv;
	GradioRadioStationsProvider* provider;
};

struct _GradioDiscoverBoxClass {
	GtkBoxClass parent_class;
};

struct _GradioDiscoverBoxPrivate {
	GradioGradioApp* app;
	GtkListBox* ResultsBox;
	GtkSearchEntry* SearchEntry;
	GtkStack* SearchStack;
};

typedef enum  {
	GRADIO_SEARCH_BY_ID,
	GRADIO_SEARCH_BY_NAME,
	GRADIO_SEARCH_BY_NAME_EXACT,
	GRADIO_SEARCH_BY_CODEC,
	GRADIO_SEARCH_BY_COUNTRY,
	GRADIO_SEARCH_BY_COUNTRY_EXACT,
	GRADIO_SEARCH_BY_STATE,
	GRADIO_SEARCH_BY_STATE_EXACT,
	GRADIO_SEARCH_BY_LANGUAGE,
	GRADIO_SEARCH_BY_LANGUAGE_EXACT,
	GRADIO_SEARCH_BY_TAG,
	GRADIO_SEARCH_BY_TAG_EXACT
} GradioSearch;


static gpointer gradio_discover_box_parent_class = NULL;

GType gradio_discover_box_get_type (void) G_GNUC_CONST;
gpointer gradio_radio_stations_provider_ref (gpointer instance);
void gradio_radio_stations_provider_unref (gpointer instance);
GParamSpec* gradio_param_spec_radio_stations_provider (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void gradio_value_set_radio_stations_provider (GValue* value, gpointer v_object);
void gradio_value_take_radio_stations_provider (GValue* value, gpointer v_object);
gpointer gradio_value_get_radio_stations_provider (const GValue* value);
GType gradio_radio_stations_provider_get_type (void) G_GNUC_CONST;
GType gradio_gradio_app_get_type (void) G_GNUC_CONST;
#define GRADIO_DISCOVER_BOX_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), GRADIO_TYPE_DISCOVER_BOX, GradioDiscoverBoxPrivate))
enum  {
	GRADIO_DISCOVER_BOX_DUMMY_PROPERTY
};
GradioDiscoverBox* gradio_discover_box_new (GradioGradioApp** a);
GradioDiscoverBox* gradio_discover_box_construct (GType object_type, GradioGradioApp** a);
GradioRadioStationsProvider* gradio_radio_stations_provider_new (GradioGradioApp** a);
GradioRadioStationsProvider* gradio_radio_stations_provider_construct (GType object_type, GradioGradioApp** a);
static void __lambda6_ (GradioDiscoverBox* self);
gboolean gradio_radio_stations_provider_get_isWorking (GradioRadioStationsProvider* self);
static void ___lambda6__gradio_radio_stations_provider_status_changed (GradioRadioStationsProvider* _sender, gpointer self);
static void gradio_discover_box_SearchEntry_search_changed (GradioDiscoverBox* self);
GType gradio_search_get_type (void) G_GNUC_CONST;
void gradio_radio_stations_provider_search_radio_stations (GradioRadioStationsProvider* self, const gchar* search, GradioSearch type, GAsyncReadyCallback _callback_, gpointer _user_data_);
gpointer radio_station_ref (gpointer instance);
void radio_station_unref (gpointer instance);
GParamSpec* param_spec_radio_station (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_radio_station (GValue* value, gpointer v_object);
void value_take_radio_station (GValue* value, gpointer v_object);
gpointer value_get_radio_station (const GValue* value);
GType radio_station_get_type (void) G_GNUC_CONST;
GeeArrayList* gradio_radio_stations_provider_search_radio_stations_finish (GradioRadioStationsProvider* self, GAsyncResult* _res_, GError** error);
static void __lambda7_ (GradioDiscoverBox* self, GObject* obj, GAsyncResult* res);
static void gradio_discover_box_build_result_list (GradioDiscoverBox* self, GeeArrayList* stations);
static void ___lambda7__gasync_ready_callback (GObject* source_object, GAsyncResult* res, gpointer self);
static void _gradio_discover_box_SearchEntry_search_changed_gtk_search_entry_search_changed (GtkSearchEntry* _sender, gpointer self);
static void gradio_discover_box_RecentlyButton_clicked (GradioDiscoverBox* self);
static void __lambda8_ (GradioDiscoverBox* self, GObject* obj, GAsyncResult* res);
static void ___lambda8__gasync_ready_callback (GObject* source_object, GAsyncResult* res, gpointer self);
static void _gradio_discover_box_RecentlyButton_clicked_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void gradio_discover_box_ClicksButton_clicked (GradioDiscoverBox* self);
static void __lambda9_ (GradioDiscoverBox* self, GObject* obj, GAsyncResult* res);
static void ___lambda9__gasync_ready_callback (GObject* source_object, GAsyncResult* res, gpointer self);
static void _gradio_discover_box_ClicksButton_clicked_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void gradio_discover_box_VotesButton_clicked (GradioDiscoverBox* self);
static void __lambda10_ (GradioDiscoverBox* self, GObject* obj, GAsyncResult* res);
static void ___lambda10__gasync_ready_callback (GObject* source_object, GAsyncResult* res, gpointer self);
static void _gradio_discover_box_VotesButton_clicked_gtk_button_clicked (GtkButton* _sender, gpointer self);
void util_remove_all_widgets (GtkListBox** container);
GType gradio_list_item_get_type (void) G_GNUC_CONST;
GradioListItem* gradio_list_item_new (GradioGradioApp* a, RadioStation* s);
GradioListItem* gradio_list_item_construct (GType object_type, GradioGradioApp* a, RadioStation* s);
static void gradio_discover_box_finalize (GObject* obj);


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static void __lambda6_ (GradioDiscoverBox* self) {
	GradioRadioStationsProvider* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	_tmp0_ = self->provider;
	_tmp1_ = gradio_radio_stations_provider_get_isWorking (_tmp0_);
	_tmp2_ = _tmp1_;
	if (_tmp2_) {
		GtkStack* _tmp3_ = NULL;
		_tmp3_ = self->priv->SearchStack;
		gtk_stack_set_visible_child_name (_tmp3_, "loading");
	} else {
		GtkStack* _tmp4_ = NULL;
		_tmp4_ = self->priv->SearchStack;
		gtk_stack_set_visible_child_name (_tmp4_, "no_results");
	}
}


static void ___lambda6__gradio_radio_stations_provider_status_changed (GradioRadioStationsProvider* _sender, gpointer self) {
	__lambda6_ ((GradioDiscoverBox*) self);
}


GradioDiscoverBox* gradio_discover_box_construct (GType object_type, GradioGradioApp** a) {
	GradioDiscoverBox * self = NULL;
	GradioGradioApp* _tmp0_ = NULL;
	GradioGradioApp* _tmp1_ = NULL;
	GradioRadioStationsProvider* _tmp2_ = NULL;
	GradioRadioStationsProvider* _tmp3_ = NULL;
	g_return_val_if_fail (*a != NULL, NULL);
	self = (GradioDiscoverBox*) g_object_new (object_type, NULL);
	_tmp0_ = *a;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->app);
	self->priv->app = _tmp1_;
	_tmp2_ = gradio_radio_stations_provider_new (&self->priv->app);
	_gradio_radio_stations_provider_unref0 (self->provider);
	self->provider = _tmp2_;
	_tmp3_ = self->provider;
	g_signal_connect_object (_tmp3_, "status-changed", (GCallback) ___lambda6__gradio_radio_stations_provider_status_changed, self, 0);
	return self;
}


GradioDiscoverBox* gradio_discover_box_new (GradioGradioApp** a) {
	return gradio_discover_box_construct (GRADIO_TYPE_DISCOVER_BOX, a);
}


static void __lambda7_ (GradioDiscoverBox* self, GObject* obj, GAsyncResult* res) {
	GError * _inner_error_ = NULL;
	g_return_if_fail (res != NULL);
	{
		GeeArrayList* search_results = NULL;
		GradioRadioStationsProvider* _tmp0_ = NULL;
		GAsyncResult* _tmp1_ = NULL;
		GeeArrayList* _tmp2_ = NULL;
		_tmp0_ = self->provider;
		_tmp1_ = res;
		_tmp2_ = gradio_radio_stations_provider_search_radio_stations_finish (_tmp0_, _tmp1_, &_inner_error_);
		search_results = _tmp2_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			if (_inner_error_->domain == G_THREAD_ERROR) {
				goto __catch0_g_thread_error;
			}
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return;
		}
		gradio_discover_box_build_result_list (self, search_results);
		_g_object_unref0 (search_results);
	}
	goto __finally0;
	__catch0_g_thread_error:
	{
		GError* e = NULL;
		gchar* msg = NULL;
		GError* _tmp3_ = NULL;
		const gchar* _tmp4_ = NULL;
		gchar* _tmp5_ = NULL;
		FILE* _tmp6_ = NULL;
		const gchar* _tmp7_ = NULL;
		gchar* _tmp8_ = NULL;
		gchar* _tmp9_ = NULL;
		gchar* _tmp10_ = NULL;
		gchar* _tmp11_ = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		_tmp3_ = e;
		_tmp4_ = _tmp3_->message;
		_tmp5_ = g_strdup (_tmp4_);
		msg = _tmp5_;
		_tmp6_ = stderr;
		_tmp7_ = msg;
		_tmp8_ = g_strconcat ("Error: Thread:", _tmp7_, NULL);
		_tmp9_ = _tmp8_;
		_tmp10_ = g_strconcat (_tmp9_, "\n", NULL);
		_tmp11_ = _tmp10_;
		fprintf (_tmp6_, "%s", _tmp11_);
		_g_free0 (_tmp11_);
		_g_free0 (_tmp9_);
		_g_free0 (msg);
		_g_error_free0 (e);
	}
	__finally0:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


static void ___lambda7__gasync_ready_callback (GObject* source_object, GAsyncResult* res, gpointer self) {
	__lambda7_ ((GradioDiscoverBox*) self, source_object, res);
	g_object_unref (self);
}


static void gradio_discover_box_SearchEntry_search_changed (GradioDiscoverBox* self) {
	GradioRadioStationsProvider* _tmp0_ = NULL;
	GtkSearchEntry* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->provider;
	_tmp1_ = self->priv->SearchEntry;
	_tmp2_ = gtk_entry_get_text ((GtkEntry*) _tmp1_);
	gradio_radio_stations_provider_search_radio_stations (_tmp0_, _tmp2_, GRADIO_SEARCH_BY_NAME, ___lambda7__gasync_ready_callback, g_object_ref (self));
}


static void _gradio_discover_box_SearchEntry_search_changed_gtk_search_entry_search_changed (GtkSearchEntry* _sender, gpointer self) {
	gradio_discover_box_SearchEntry_search_changed ((GradioDiscoverBox*) self);
}


static void __lambda8_ (GradioDiscoverBox* self, GObject* obj, GAsyncResult* res) {
	GError * _inner_error_ = NULL;
	g_return_if_fail (res != NULL);
	{
		GeeArrayList* search_results = NULL;
		GradioRadioStationsProvider* _tmp0_ = NULL;
		GAsyncResult* _tmp1_ = NULL;
		GeeArrayList* _tmp2_ = NULL;
		_tmp0_ = self->provider;
		_tmp1_ = res;
		_tmp2_ = gradio_radio_stations_provider_search_radio_stations_finish (_tmp0_, _tmp1_, &_inner_error_);
		search_results = _tmp2_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			if (_inner_error_->domain == G_THREAD_ERROR) {
				goto __catch1_g_thread_error;
			}
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return;
		}
		gradio_discover_box_build_result_list (self, search_results);
		_g_object_unref0 (search_results);
	}
	goto __finally1;
	__catch1_g_thread_error:
	{
		GError* e = NULL;
		gchar* msg = NULL;
		GError* _tmp3_ = NULL;
		const gchar* _tmp4_ = NULL;
		gchar* _tmp5_ = NULL;
		FILE* _tmp6_ = NULL;
		const gchar* _tmp7_ = NULL;
		gchar* _tmp8_ = NULL;
		gchar* _tmp9_ = NULL;
		gchar* _tmp10_ = NULL;
		gchar* _tmp11_ = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		_tmp3_ = e;
		_tmp4_ = _tmp3_->message;
		_tmp5_ = g_strdup (_tmp4_);
		msg = _tmp5_;
		_tmp6_ = stderr;
		_tmp7_ = msg;
		_tmp8_ = g_strconcat ("Error: Thread:", _tmp7_, NULL);
		_tmp9_ = _tmp8_;
		_tmp10_ = g_strconcat (_tmp9_, "\n", NULL);
		_tmp11_ = _tmp10_;
		fprintf (_tmp6_, "%s", _tmp11_);
		_g_free0 (_tmp11_);
		_g_free0 (_tmp9_);
		_g_free0 (msg);
		_g_error_free0 (e);
	}
	__finally1:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


static void ___lambda8__gasync_ready_callback (GObject* source_object, GAsyncResult* res, gpointer self) {
	__lambda8_ ((GradioDiscoverBox*) self, source_object, res);
	g_object_unref (self);
}


static void gradio_discover_box_RecentlyButton_clicked (GradioDiscoverBox* self) {
	GradioRadioStationsProvider* _tmp0_ = NULL;
	GtkSearchEntry* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->provider;
	_tmp1_ = self->priv->SearchEntry;
	_tmp2_ = gtk_entry_get_text ((GtkEntry*) _tmp1_);
	gradio_radio_stations_provider_search_radio_stations (_tmp0_, _tmp2_, GRADIO_SEARCH_BY_NAME, ___lambda8__gasync_ready_callback, g_object_ref (self));
}


static void _gradio_discover_box_RecentlyButton_clicked_gtk_button_clicked (GtkButton* _sender, gpointer self) {
	gradio_discover_box_RecentlyButton_clicked ((GradioDiscoverBox*) self);
}


static void __lambda9_ (GradioDiscoverBox* self, GObject* obj, GAsyncResult* res) {
	GError * _inner_error_ = NULL;
	g_return_if_fail (res != NULL);
	{
		GeeArrayList* search_results = NULL;
		GradioRadioStationsProvider* _tmp0_ = NULL;
		GAsyncResult* _tmp1_ = NULL;
		GeeArrayList* _tmp2_ = NULL;
		_tmp0_ = self->provider;
		_tmp1_ = res;
		_tmp2_ = gradio_radio_stations_provider_search_radio_stations_finish (_tmp0_, _tmp1_, &_inner_error_);
		search_results = _tmp2_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			if (_inner_error_->domain == G_THREAD_ERROR) {
				goto __catch2_g_thread_error;
			}
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return;
		}
		gradio_discover_box_build_result_list (self, search_results);
		_g_object_unref0 (search_results);
	}
	goto __finally2;
	__catch2_g_thread_error:
	{
		GError* e = NULL;
		gchar* msg = NULL;
		GError* _tmp3_ = NULL;
		const gchar* _tmp4_ = NULL;
		gchar* _tmp5_ = NULL;
		FILE* _tmp6_ = NULL;
		const gchar* _tmp7_ = NULL;
		gchar* _tmp8_ = NULL;
		gchar* _tmp9_ = NULL;
		gchar* _tmp10_ = NULL;
		gchar* _tmp11_ = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		_tmp3_ = e;
		_tmp4_ = _tmp3_->message;
		_tmp5_ = g_strdup (_tmp4_);
		msg = _tmp5_;
		_tmp6_ = stderr;
		_tmp7_ = msg;
		_tmp8_ = g_strconcat ("Error: Thread:", _tmp7_, NULL);
		_tmp9_ = _tmp8_;
		_tmp10_ = g_strconcat (_tmp9_, "\n", NULL);
		_tmp11_ = _tmp10_;
		fprintf (_tmp6_, "%s", _tmp11_);
		_g_free0 (_tmp11_);
		_g_free0 (_tmp9_);
		_g_free0 (msg);
		_g_error_free0 (e);
	}
	__finally2:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


static void ___lambda9__gasync_ready_callback (GObject* source_object, GAsyncResult* res, gpointer self) {
	__lambda9_ ((GradioDiscoverBox*) self, source_object, res);
	g_object_unref (self);
}


static void gradio_discover_box_ClicksButton_clicked (GradioDiscoverBox* self) {
	GradioRadioStationsProvider* _tmp0_ = NULL;
	GtkSearchEntry* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->provider;
	_tmp1_ = self->priv->SearchEntry;
	_tmp2_ = gtk_entry_get_text ((GtkEntry*) _tmp1_);
	gradio_radio_stations_provider_search_radio_stations (_tmp0_, _tmp2_, GRADIO_SEARCH_BY_NAME, ___lambda9__gasync_ready_callback, g_object_ref (self));
}


static void _gradio_discover_box_ClicksButton_clicked_gtk_button_clicked (GtkButton* _sender, gpointer self) {
	gradio_discover_box_ClicksButton_clicked ((GradioDiscoverBox*) self);
}


static void __lambda10_ (GradioDiscoverBox* self, GObject* obj, GAsyncResult* res) {
	GError * _inner_error_ = NULL;
	g_return_if_fail (res != NULL);
	{
		GeeArrayList* search_results = NULL;
		GradioRadioStationsProvider* _tmp0_ = NULL;
		GAsyncResult* _tmp1_ = NULL;
		GeeArrayList* _tmp2_ = NULL;
		_tmp0_ = self->provider;
		_tmp1_ = res;
		_tmp2_ = gradio_radio_stations_provider_search_radio_stations_finish (_tmp0_, _tmp1_, &_inner_error_);
		search_results = _tmp2_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			if (_inner_error_->domain == G_THREAD_ERROR) {
				goto __catch3_g_thread_error;
			}
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return;
		}
		gradio_discover_box_build_result_list (self, search_results);
		_g_object_unref0 (search_results);
	}
	goto __finally3;
	__catch3_g_thread_error:
	{
		GError* e = NULL;
		gchar* msg = NULL;
		GError* _tmp3_ = NULL;
		const gchar* _tmp4_ = NULL;
		gchar* _tmp5_ = NULL;
		FILE* _tmp6_ = NULL;
		const gchar* _tmp7_ = NULL;
		gchar* _tmp8_ = NULL;
		gchar* _tmp9_ = NULL;
		gchar* _tmp10_ = NULL;
		gchar* _tmp11_ = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		_tmp3_ = e;
		_tmp4_ = _tmp3_->message;
		_tmp5_ = g_strdup (_tmp4_);
		msg = _tmp5_;
		_tmp6_ = stderr;
		_tmp7_ = msg;
		_tmp8_ = g_strconcat ("Error: Thread:", _tmp7_, NULL);
		_tmp9_ = _tmp8_;
		_tmp10_ = g_strconcat (_tmp9_, "\n", NULL);
		_tmp11_ = _tmp10_;
		fprintf (_tmp6_, "%s", _tmp11_);
		_g_free0 (_tmp11_);
		_g_free0 (_tmp9_);
		_g_free0 (msg);
		_g_error_free0 (e);
	}
	__finally3:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


static void ___lambda10__gasync_ready_callback (GObject* source_object, GAsyncResult* res, gpointer self) {
	__lambda10_ ((GradioDiscoverBox*) self, source_object, res);
	g_object_unref (self);
}


static void gradio_discover_box_VotesButton_clicked (GradioDiscoverBox* self) {
	GradioRadioStationsProvider* _tmp0_ = NULL;
	GtkSearchEntry* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->provider;
	_tmp1_ = self->priv->SearchEntry;
	_tmp2_ = gtk_entry_get_text ((GtkEntry*) _tmp1_);
	gradio_radio_stations_provider_search_radio_stations (_tmp0_, _tmp2_, GRADIO_SEARCH_BY_NAME, ___lambda10__gasync_ready_callback, g_object_ref (self));
}


static void _gradio_discover_box_VotesButton_clicked_gtk_button_clicked (GtkButton* _sender, gpointer self) {
	gradio_discover_box_VotesButton_clicked ((GradioDiscoverBox*) self);
}


static void gradio_discover_box_build_result_list (GradioDiscoverBox* self, GeeArrayList* stations) {
	GeeArrayList* _tmp0_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (stations != NULL);
	util_remove_all_widgets (&self->priv->ResultsBox);
	g_print ("NR 1 HÄÄÄÄÄÄÄÄÄÄÄ?\n");
	_tmp0_ = stations;
	if (_tmp0_ != NULL) {
		gboolean _tmp1_ = FALSE;
		GtkSearchEntry* _tmp2_ = NULL;
		const gchar* _tmp3_ = NULL;
		g_print ("NR 2 HÄÄÄÄÄÄÄÄÄÄÄ?\n");
		_tmp2_ = self->priv->SearchEntry;
		_tmp3_ = gtk_entry_get_text ((GtkEntry*) _tmp2_);
		if (g_strcmp0 (_tmp3_, "") != 0) {
			GeeArrayList* _tmp4_ = NULL;
			gboolean _tmp5_ = FALSE;
			gboolean _tmp6_ = FALSE;
			_tmp4_ = stations;
			_tmp5_ = gee_collection_get_is_empty ((GeeCollection*) _tmp4_);
			_tmp6_ = _tmp5_;
			_tmp1_ = !_tmp6_;
		} else {
			_tmp1_ = FALSE;
		}
		if (_tmp1_) {
			{
				GeeArrayList* _station_list = NULL;
				GeeArrayList* _tmp7_ = NULL;
				GeeArrayList* _tmp8_ = NULL;
				gint _station_size = 0;
				GeeArrayList* _tmp9_ = NULL;
				gint _tmp10_ = 0;
				gint _tmp11_ = 0;
				gint _station_index = 0;
				_tmp7_ = stations;
				_tmp8_ = _g_object_ref0 (_tmp7_);
				_station_list = _tmp8_;
				_tmp9_ = _station_list;
				_tmp10_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp9_);
				_tmp11_ = _tmp10_;
				_station_size = _tmp11_;
				_station_index = -1;
				while (TRUE) {
					gint _tmp12_ = 0;
					gint _tmp13_ = 0;
					gint _tmp14_ = 0;
					RadioStation* station = NULL;
					GeeArrayList* _tmp15_ = NULL;
					gint _tmp16_ = 0;
					gpointer _tmp17_ = NULL;
					GradioListItem* box = NULL;
					GradioGradioApp* _tmp18_ = NULL;
					RadioStation* _tmp19_ = NULL;
					GradioListItem* _tmp20_ = NULL;
					GtkListBox* _tmp21_ = NULL;
					GradioListItem* _tmp22_ = NULL;
					GtkStack* _tmp23_ = NULL;
					_tmp12_ = _station_index;
					_station_index = _tmp12_ + 1;
					_tmp13_ = _station_index;
					_tmp14_ = _station_size;
					if (!(_tmp13_ < _tmp14_)) {
						break;
					}
					_tmp15_ = _station_list;
					_tmp16_ = _station_index;
					_tmp17_ = gee_abstract_list_get ((GeeAbstractList*) _tmp15_, _tmp16_);
					station = (RadioStation*) _tmp17_;
					g_print ("added...");
					_tmp18_ = self->priv->app;
					_tmp19_ = station;
					_tmp20_ = gradio_list_item_new (_tmp18_, _tmp19_);
					g_object_ref_sink (_tmp20_);
					box = _tmp20_;
					_tmp21_ = self->priv->ResultsBox;
					_tmp22_ = box;
					gtk_container_add ((GtkContainer*) _tmp21_, (GtkWidget*) _tmp22_);
					_tmp23_ = self->priv->SearchStack;
					gtk_stack_set_visible_child_name (_tmp23_, "results");
					_g_object_unref0 (box);
					_radio_station_unref0 (station);
				}
				_g_object_unref0 (_station_list);
			}
		}
	}
}


static void gradio_discover_box_class_init (GradioDiscoverBoxClass * klass) {
	gint GradioDiscoverBox_private_offset;
	gradio_discover_box_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (GradioDiscoverBoxPrivate));
	G_OBJECT_CLASS (klass)->finalize = gradio_discover_box_finalize;
	GradioDiscoverBox_private_offset = g_type_class_get_instance_private_offset (klass);
	gtk_widget_class_set_template_from_resource (GTK_WIDGET_CLASS (klass), "/de/haecker-felix/gradio/ui/discover-box.ui");
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "ResultsBox", FALSE, GradioDiscoverBox_private_offset + G_STRUCT_OFFSET (GradioDiscoverBoxPrivate, ResultsBox));
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "SearchEntry", FALSE, GradioDiscoverBox_private_offset + G_STRUCT_OFFSET (GradioDiscoverBoxPrivate, SearchEntry));
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "SearchStack", FALSE, GradioDiscoverBox_private_offset + G_STRUCT_OFFSET (GradioDiscoverBoxPrivate, SearchStack));
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "SearchEntry_search_changed", G_CALLBACK(_gradio_discover_box_SearchEntry_search_changed_gtk_search_entry_search_changed));
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "RecentlyButton_clicked", G_CALLBACK(_gradio_discover_box_RecentlyButton_clicked_gtk_button_clicked));
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "ClicksButton_clicked", G_CALLBACK(_gradio_discover_box_ClicksButton_clicked_gtk_button_clicked));
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "VotesButton_clicked", G_CALLBACK(_gradio_discover_box_VotesButton_clicked_gtk_button_clicked));
}


static void gradio_discover_box_instance_init (GradioDiscoverBox * self) {
	self->priv = GRADIO_DISCOVER_BOX_GET_PRIVATE (self);
	gtk_widget_init_template (GTK_WIDGET (self));
}


static void gradio_discover_box_finalize (GObject* obj) {
	GradioDiscoverBox * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GRADIO_TYPE_DISCOVER_BOX, GradioDiscoverBox);
	_g_object_unref0 (self->priv->app);
	_gradio_radio_stations_provider_unref0 (self->provider);
	_g_object_unref0 (self->priv->ResultsBox);
	_g_object_unref0 (self->priv->SearchEntry);
	_g_object_unref0 (self->priv->SearchStack);
	G_OBJECT_CLASS (gradio_discover_box_parent_class)->finalize (obj);
}


GType gradio_discover_box_get_type (void) {
	static volatile gsize gradio_discover_box_type_id__volatile = 0;
	if (g_once_init_enter (&gradio_discover_box_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (GradioDiscoverBoxClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gradio_discover_box_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GradioDiscoverBox), 0, (GInstanceInitFunc) gradio_discover_box_instance_init, NULL };
		GType gradio_discover_box_type_id;
		gradio_discover_box_type_id = g_type_register_static (gtk_box_get_type (), "GradioDiscoverBox", &g_define_type_info, 0);
		g_once_init_leave (&gradio_discover_box_type_id__volatile, gradio_discover_box_type_id);
	}
	return gradio_discover_box_type_id__volatile;
}



